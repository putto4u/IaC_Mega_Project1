네, 요청하신 대로 **사이트별 리소스 요약표**를 추가하여 명세서를 업데이트했습니다.

---

# **실전 프로젝트 명세서: 메가프로젝트3 (Hyper-Connected Hybrid Multi-Cloud)**

## **1. 프로젝트 개요**

본 프로젝트는 **AWS(메인), GCP(확장), 본사(코어)** 3개의 이질적인 인프라를 하나로 묶는 최종 단계의 시나리오입니다.

단순한 네트워크 연결을 넘어, **AWS Systems Manager(SSM)**를 통한 통합 관리 환경을 구축하고, **AWS Route53**과 **Docker 컨테이너** 기술을 활용하여 인프라의 유연성과 애플리케이션의 이식성(Portability)을 극대화한 엔터프라이즈급 아키텍처를 구현합니다.

---

## **2. 아키텍처 토폴로지 및 구성 전략**

전체 시스템은 **사용자 트래픽(Public)**과 **내부 관리 트래픽(Private)**이 철저히 분리되며, 모든 애플리케이션은 **컨테이너 기반**으로 구동됩니다.

### **A. 트래픽 라우팅 전략 (Traffic Flow)**

* **Front-End (User Access):**
* **Control:** AWS Route53 (DNS)
* **Policy:** 가중치 기반(Weighted) 또는 지연 시간 기반(Latency) 라우팅.
* **Flow:** 사용자는 AWS를 경유하지 않고, Route53의 안내에 따라 **AWS ALB, GCP LB, 본사 Public IP로 각각 직접 접속**합니다. (Network Cost 절감 및 성능 최적화)


* **Back-End (Internal Sync):**
* **Control:** OpenSource VPN (Site-to-Site Mesh)
* **Flow:** DB Replication, SSM Agent 통신, Docker Image Pulling(Private Registry), 관리자 트래픽만 VPN 터널을 통과합니다.



### **B. 통합 관리 전략 (Management)**

* **AWS Systems Manager (SSM):** AWS, GCP, 본사 서버에 모두 SSM Agent를 설치하여 단일 콘솔에서 패치 관리 및 명령 실행.
* **Docker & ECR:** 애플리케이션을 컨테이너화하여 배포하며, AWS ECR(Elastic Container Registry)을 중앙 이미지 저장소로 활용하여 3개 사이트가 동일한 애플리케이션 버전을 유지함.

---

## **3. 사이트별 상세 리소스 명세 (Resource Specification)**

각 거점은 **Docker Host** 역할을 수행하는 컴퓨팅 자원과 이에 맞는 네트워크 구성을 가집니다.

### **[3-Site 리소스 구성 요약표]**

| 구분 | **Site 1: AWS (Primary)** | **Site 2: GCP (Secondary)** | **Site 3: 본사 (Core/Legacy)** |
| --- | --- | --- | --- |
| **역할** | 메인 서비스 & 트래픽 처리 | 트래픽 분산 & DR 확장 | 핵심 데이터 보관 & 레거시 구동 |
| **위치 (Region)** | Seoul (ap-northeast-2) | Seoul (asia-northeast3) | On-Premise (Local/VirtualBox) |
| **Web (Docker)** | **EC2 x 3대** (Auto Scaling) | **CE x 3대** (Managed Instance Group) | **VM x 1대** (Legacy Web Container) |
| **DB (Data)** | **RDS x 2대** (Primary+Replica) | **Cloud SQL x 2대** (Replica) | **VM x 1대** (Master Data) |
| **Storage** | S3 Bucket (정적 웹/백업) | GCS Bucket (아카이빙) | VM x 1대 (File Server) |
| **Network** | VPC, ALB, NAT Gateway | VPC, Load Balancer | Host-Only/NAT, **Static Public IP** |
| **Connectivity** | VPN Gateway (Customer GW) | VPN Gateway (OpenSource VM) | VPN VM (Concentrator) |
| **Management** | **Route53, SSM, ECR** | SSM Agent, Cloud Logging | SSM Agent |

### **Site 1: AWS Cloud (Primary Service Zone)**

가장 많은 트래픽을 처리하며 유연하게 확장되는 메인 사이트입니다.

* **Compute:**
* **Web Server:** EC2 (t3.medium) x **3대** (Auto Scaling Group)
* *Provisioning:* `user_data`를 통해 Docker 자동 설치 및 웹 컨테이너 실행.


* **DB Server:** RDS for MySQL (Primary + Read Replica) x **2대**


* **Storage:** S3 Bucket x **2개** (정적 호스팅/백업)
* **Network:** VPC, Public/Private Subnet, Internet Gateway, NAT Gateway
* **Management:** Route53 Hosted Zone, SSM Agent, ECR Repository 생성
* **Connectivity:** Customer Gateway (OpenSource VPN 연결용)

### **Site 2: GCP Cloud (Traffic Overflow & Multi-Cloud)**

AWS 트래픽 폭주 시 부하를 분담하거나, 재해 시 가동되는 확장 사이트입니다.

* **Compute:**
* **Web Server:** Compute Engine (e2-medium) x **3대** (Managed Instance Group)
* *Provisioning:* AWS ECR 또는 동기화된 Registry에서 Docker 이미지를 Pull 받아 실행.


* **DB Server:** Cloud SQL for MySQL x **2대** (Replica)


* **Storage:** Google Cloud Storage (GCS) x **2개**
* **Network:** VPC, Firewall Rules (AWS Security Group 정책 매핑)
* **Management:** SSM Agent (Hybrid Activation)
* **Connectivity:** VPN Gateway (OpenSource VPN VM 활용)

### **Site 3: 본사 On-Premise (Core Data & Legacy)**

핵심 데이터를 보관하며, 레거시 시스템을 컨테이너로 전환하여 운영합니다.

* **Environment:** VirtualBox (Local PC Simulation)
* **Compute:**
* **Web Server:** VM x **1대** (Docker Host)
* *App:* 기존 레거시 앱을 컨테이너화(Containerization)하여 구동.


* **DB Server:** VM x **1대** (Oracle or MySQL Master Data)
* **File Server:** VM x **1대** (Storage 역할)
* **VPN Gateway:** VM x **1대** (StrongSwan/WireGuard - VPN Concentrator)


* **Network:** Host-Only Adapter (Internal), NAT Network (External Access)
* **Requirement:** 고정 공인 IP(Static Public IP) 또는 포트포워딩 환경

---

## **4. 핵심 기술 스택 및 도구 (Tech Stack)**

이 프로젝트를 구현하기 위해 사용되는 주요 기술입니다.

1. **Infrastructure as Code (IaC):**
* **Terraform:** AWS, Google, VirtualBox, Docker 프로바이더를 활용한 멀티 모듈 구성.


2. **Application Runtime:**
* **Docker:** 모든 웹 애플리케이션의 표준 런타임.
* **AWS ECR:** 멀티 클라우드 환경을 위한 중앙 컨테이너 이미지 저장소.


3. **Traffic Management:**
* **AWS Route53:** DNS 기반의 글로벌 트래픽 로드밸런싱.


4. **Connectivity & Security:**
* **OpenSource VPN:** StrongSwan/WireGuard를 통한 비용 효율적인 메쉬 네트워크 구성.


5. **Operations:**
* **AWS SSM:** 하이브리드 인프라 통합 관리 (Patch, Run Command).



---

Next Level : 메가프로젝트3 구현을 위한 테라폼 폴더 구조 설계 및 멀티 프로바이더 설정

메가프로젝트3 최종 명세서, 사이트별 리소스 요약표, Docker 컨테이너, AWS ECR, Route53, SSM 통합 관리
